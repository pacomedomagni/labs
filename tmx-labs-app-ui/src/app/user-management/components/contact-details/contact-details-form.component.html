<!-- contact-details-form.component.html -->
<form [formGroup]="detailsForm" class="flex flex-col max-w-xl" arial-label="Contact Details Form">
    <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" autocomplete="name" />
        @if (hasFieldError('name', 'required')) {
            <mat-error class="whitespace-nowrap w-auto">Name is required</mat-error>
        } @else if (hasFieldError('name', 'minlength')) {
            <mat-error class="whitespace-nowrap w-auto">Name must be at least 2 characters long</mat-error>
        } @else if (hasFieldError('name', 'pattern')) {
            <mat-error class="whitespace-nowrap w-auto">Name must contain first and last name with letters and spaces only.</mat-error>
        }
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>Street Address</mat-label>
        <input matInput formControlName="address1" />
        @if (hasFieldError('address1', 'required')) {
            <mat-error class="whitespace-nowrap w-auto">Address is required</mat-error>
        } @else if (hasFieldError('address1', 'minlength')) {
            <mat-error class="whitespace-nowrap w-auto">Address must be at least 5 characters long</mat-error>
        }
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" />
        @if (hasFieldError('city', 'required')) {
            <mat-error class="whitespace-nowrap w-auto">City is required</mat-error>
        } @else if (hasFieldError('city', 'minlength')) {
            <mat-error class="whitespace-nowrap w-auto">City must be at least 2 characters long</mat-error>
        } @else if (hasFieldError('city', 'pattern')) {
            <mat-error class="whitespace-nowrap w-auto">City can only contain letters and spaces</mat-error>
        }
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>State</mat-label>
        <mat-select formControlName="state">
            @for (stateOption of states; track stateOption) {
                <mat-option [value]="stateOption">
                    {{ stateOption }}
                </mat-option>
            }
        </mat-select>
        @if (hasFieldError('state', 'required')) {
            <mat-error class="whitespace-nowrap w-auto">State is required</mat-error>
        }
    </mat-form-field>

    <mat-form-field appearance="outline">
        <mat-label>ZIP Code</mat-label>
        <input matInput formControlName="zip" maxlength="10" />
        @if (hasFieldError('zip', 'required')) {
            <mat-error class="whitespace-nowrap w-auto">ZIP code is required</mat-error>
        }
        @if (hasFieldError('zip', 'pattern')) {
            <mat-error class="whitespace-nowrap w-auto">Invalid ZIP code format</mat-error>
        }
    </mat-form-field>
</form>
